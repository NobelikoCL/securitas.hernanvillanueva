{% extends "pwa_base.html" %}
{% load crispy_forms_tags %}

{% block title %}{{ titulo_pagina }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">{{ titulo_pagina }}</h1>
</div>

{% if es_creacion %}
    <p>Complete el siguiente formulario para registrar un nuevo cliente.</p>
{% else %}
    <p>Editando la información del cliente: <strong>{{ object.nombre }}</strong>.</p>
{% endif %}

<form method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <div class="mt-3">
        <button type="submit" class="btn btn-success">
            {% if es_creacion %}Registrar Cliente{% else %}Guardar Cambios{% endif %}
        </button>
        <a href="{% if object %}{% url 'flota_app:cliente_list' %}{% else %}{% url 'flota_app:cliente_list' %}{% endif %}" class="btn btn-secondary">Cancelar</a>
    </div>
</form>

{% if object and not es_creacion %} {# object es el cliente en UpdateView #}
<hr class="my-4">
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                Recursos del Cliente
            </div>
            <div class="card-body">
                <p>Gestionar los recursos asociados a <strong>{{ object.nombre }}</strong>.</p>
                <a href="{% url 'flota_app:centrocosto_list_by_cliente' object.pk %}" class="btn btn-info mb-2">Gestionar Centros de Costo ({{ object.centros_costo.count }})</a>
                {# Aquí podríamos añadir enlaces a la gestión de personal y vehículos asignados a este cliente en el futuro #}
            </div>
        </div>
    </div>
</div>
{% endif %}

{% endblock %}
