{% extends "pwa_base.html" %}

{% block title %}{{ titulo_pagina }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>{{ titulo_pagina }}</h2>
        <div>
            <a href="{% url 'flota_app:personal_update' personal.pk %}" class="btn btn-warning">Editar</a>
            <a href="{% url 'flota_app:personal_delete' personal.pk %}" class="btn btn-danger">Eliminar</a>
            <a href="{% url 'flota_app:personal_list' %}" class="btn btn-secondary">Volver al Listado</a>
        </div>
    </div>
    <hr>

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Información de {{ personal.nombre }} {{ personal.apellido }}</h5>
            <div class="row">
                <div class="col-md-6">
                    <p><strong>RUT:</strong> {{ personal.rut }}</p>
                    <p><strong>Legajo:</strong> {{ personal.legajo }}</p>
                    <p><strong>Fecha de Nacimiento:</strong> {{ personal.fecha_nacimiento|date:"d/m/Y" }}</p>
                    <p><strong>Fecha de Ingreso:</strong> {{ personal.fecha_ingreso|date:"d/m/Y" }}</p>
                    <p><strong>Dirección:</strong> {{ personal.direccion }}</p>
                </div>
                <div class="col-md-6">
                    <p><strong>Teléfono de Contacto:</strong> {{ personal.telefono_contacto }}</p>
                    <p><strong>Acepta Mensajería WhatsApp:</strong> {% if personal.acepta_mensajeria_whatsapp %}Sí{% else %}No{% endif %}</p>
                    <p><strong>Instalación de Trabajo:</strong> {{ personal.instalacion_trabajo.nombre|default:"No asignada" }}</p>
                    <p><strong>Centro de Costo:</strong> {{ personal.centro_costo.nombre }} ({{ personal.centro_costo.codigo }})</p>
                    <p><strong>Usuario del Sistema:</strong> {{ personal.usuario.username|default:"No asignado" }}</p>
                </div>
            </div>

            <h6 class="mt-4">Turnos Asociados:</h6>
            {% if personal.turnos.all %}
                <ul>
                {% for turno in personal.turnos.all %}
                    <li>{{ turno.get_tipo_turno_display }} - {{ turno.fecha_hora_inicio|date:"d/m/Y H:i" }} a {{ turno.fecha_hora_fin|date:"d/m/Y H:i" }} en {{ turno.instalacion.nombre|default:"N/A" }}</li>
                {% endfor %}
                </ul>
            {% else %}
                <p>No tiene turnos asignados.</p>
            {% endif %}

            <!-- Aquí podrías añadir más información relacionada, como historial de asignaciones, etc. -->

        </div>
    </div>
</div>
{% endblock %}
